{
    "contents" : "library('tcltk')\nlibrary('sqldf')\n\ngraffitiData <- read.csv('~/Desktop/Graffiti_Locations.csv', stringsAsFactors = FALSE)\n\nnames(graffitiData)\n\nnames(graffitiData) <- c(\"Address\", \"Borough\", \"CBoard\", \"Pct\", \"CCDistrict\", \"CreatedMonth\", \"CreatedDay\", \"CreatedYear\", \"Status\", \"Resolution\", \"X\", \"Y\", \"ClosedMonth\", \"ClosedDay\", \"ClosedYear\")\n\ngraffitiData$createdYearMonth <- paste(graffitiData$CreatedMonth, graffitiData$CreatedYear, sep = \"_\")\ngraffitiData$closedYearMonth <- paste(graffitiData$ClosedMonth, graffitiData$ClosedYear, sep = \"_\")\n\n\n\n######################################\n#   Tags by created date by Borough  #\n######################################\n\ngraffitiCreatedMonthBoro <- sqldf('SELECT Borough, createdYearMonth as Date, count(*) as CreatedIncidents FROM  graffitiData GROUP BY Borough, createdYearMonth')\n\ngraffitiCreatedMonthBoro <- graffitiCreatedMonthBoro[with(graffitiCreatedMonthBoro, order(CreatedMonth)), ]\n\n\n######################################\n#   Tags by closed date by Borough  #\n######################################\n\n\ngraffitiClosedMonthBoro <- sqldf('SELECT Borough, closedYearMonth as Date, count(*) as ClosedIncidents FROM  graffitiData GROUP BY Borough, closedYearMonth')\n\ngraffitiClosedMonthBoro <- graffitiClosedMonthBoro[with(graffitiClosedMonthBoro, order(ClosedMonth)), ]\n\n\n#############################################\n#   Split the boroughs into separate files  #\n#############################################\n\nlibrary('plyr')\n\n# MANHATTAN\ngr_ManCreated <- sqldf('SELECT * from graffitiCreatedMonthBoro WHERE Borough = \"MANHATTAN\"  ')\ngr_ManClosed <- sqldf('SELECT * from graffitiClosedMonthBoro WHERE Borough = \"MANHATTAN\"  ')\n\ngr_Manhattan <- join (gr_ManCreated, gr_ManClosed, by = \"Date\", type = \"inner\")\n\n# BROOKLYN\ngr_BkCreated <- sqldf('SELECT * from graffitiCreatedMonthBoro WHERE Borough = \"BROOKLYN\"  ')\ngr_BkClosed <- sqldf('SELECT * from graffitiClosedMonthBoro WHERE Borough = \"BROOKLYN\"  ')\n\ngr_Brooklyn <- join (gr_BkCreated, gr_BkClosed, by = \"Date\", type = \"inner\")\n\n# QUEENS\ngr_QnCreated <- sqldf('SELECT * from graffitiCreatedMonthBoro WHERE Borough = \"QUEENS\"  ')\ngr_QnClosed <- sqldf('SELECT * from graffitiClosedMonthBoro WHERE Borough = \"QUEENS\"  ')\n\ngr_Queens <- join (gr_QnCreated, gr_QnClosed, by = \"Date\", type = \"inner\")\n\n# STATEN ISLAND\ngr_SiCreated <- sqldf('SELECT * from graffitiCreatedMonthBoro WHERE Borough = \"STATEN ISLAND\"  ')\ngr_SiClosed <- sqldf('SELECT * from graffitiClosedMonthBoro WHERE Borough = \"STATEN ISLAND\"  ')\n\ngr_StatenIsland <- join (gr_SiCreated, gr_SiClosed, by = \"Date\", type = \"left\")  \n\n# BRONX\ngr_BxCreated <- sqldf('SELECT * from graffitiCreatedMonthBoro WHERE Borough = \"BRONX\"  ')\ngr_BxClosed <- sqldf('SELECT * from graffitiClosedMonthBoro WHERE Borough = \"BRONX\"  ')\n\ngr_Bronx <- join (gr_BxCreated, gr_BxClosed, by = \"Date\", type = \"inner\")\n\n##################################\n# Make the files\n###################################\n\nwrite.csv(gr_Manhattan, \"gr_Manhattan.csv\", row.names=FALSE)\nwrite.csv(gr_Brooklyn, \"gr_Brooklyn.csv\", row.names=FALSE)\nwrite.csv(gr_Queens, \"gr_Queens.csv\", row.names=FALSE)\nwrite.csv(gr_StatenIsland, \"gr_StatenIsland.csv\", row.names=FALSE)\nwrite.csv(gr_Bronx, \"gr_Bronx.csv\", row.names=FALSE)\n",
    "created" : 1350190120804.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2543668520",
    "id" : "915065C2",
    "lastKnownWriteTime" : 1350275720,
    "path" : "/Applications/MAMP/htdocs/graffiti-locations/GraffitiR/GraffitiScript.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "source_on_save" : false,
    "type" : "r_source"
}